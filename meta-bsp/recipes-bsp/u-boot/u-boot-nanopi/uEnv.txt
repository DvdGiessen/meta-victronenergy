bootdelay=2
bootpart=0:2
arch=arm
cpu=armv7
board=nanopi
board_name=EasySolar Display
soc=sunxi
bootfile=/boot/zImage
console=ttyS0,115200n8
kernel_addr_r=0x42000000
fdt_addr_r=0x43000000
fdtfile=nanopi_easysolar-display.dtb
mmcroot=/dev/mmcblk0p2
mmcrootfstype=ext4 rootwait
optargs=consoleblank=0 dwc_otg.lpm_enable=0 elevator=deadline
setroot=if test "${version}" = 2; then setenv bootpart 0:3; setenv mmcroot /dev/mmcblk0p3; fi
mmcargs=fdt addr $fdt_addr_r; fdt get value origbootargs /chosen bootargs; setenv bootargs "${origbootargs} console=${console} ${optargs} root=${mmcroot} ro rootfstype=${mmcrootfstype}"
loadfdt=echo load fdt ${fdtfile} from mmc 0:1; load mmc 0:1 ${fdt_addr_r} /${fdtfile}
loadimage=echo load kernel ${bootfile} from mmc ${bootpart}; ext2load mmc ${bootpart} ${kernel_addr_r} ${bootfile}
bootcmd=run loadfdt; run setroot; if run loadimage; then run mmcargs; bootz ${kernel_addr_r} - ${fdt_addr_r}; fi;

preboot=usb start
stderr=serial
stdin=serial,usbkbd
stdout=serial
